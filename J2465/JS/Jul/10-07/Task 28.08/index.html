<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title> task 28.08 </title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
</head>

<body>
  <div class="container">
    <h2>Lucky Dice Casino - Dice History (lịch sử xúc xắc)</h2>
    <div class="row">
      <button class="btn btn-info" onclick="onCreateSampleDiceHistoryTableClick()"> Tạo bảng lịch sử chơi xúc xắc - Create Dice History Table</button>
    </div>
    <div class="row">
      <table id="table-dice-history" class="table table-striped table-bordered table-hover">
        <thead>
          <tr>
            <th>Game</th>
            <th>Dice</th>
          </tr>
        </thead>
        <tbody>
          <!-- tbody chưa có dòng dữ liệu nào-->
        </tbody>
      </table>
    </div>
  </div>

  <script>
    'use strict';
    const gEND_OF_ROW_COL = -1;

    //lịch sử chơi dices, trả về như response
    const gJsonDiceHistoryResponseText = `
      { 
        "dices":[6,5,5,1,4,5,5,2,2,6,6,2,4],                        
        "status":"200"                              
      }
    `;

    const gCOL_GAMES = 0; //số thứ tự cột games (lần chơi thứ mấy)
    const gCOL_DICE = 1; // số thứ tự cột dice, lần đó được xúc xắc nào
    /*** REGION 2 - Vùng gán / thực thi sự kiện cho các elements */

    /*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
    //create table of sample dice history
    //tạo bảng trên dữ liệu Dice HIstory cho trước 
    function onCreateSampleDiceHistoryTableClick() {
      "use strict";
      // subtask 1: chuyển JSON text sang Object
      var vDiceHistory = JSON.parse(gJsonDiceHistoryResponseText)
      var vDices = vDiceHistory["dices"]
      // tìm element 
      var vDiceHistoryTable = document.getElementById("table-dice-history");
      // truy xuất được phần tử tbody trong table
      // cách truy xuất là bằng TagName, với cách này ta sẽ có một mảng các tbody trong bảng. ta lấy phần tử số 0 của mảng này 
      var vTableBody = vDiceHistoryTable.getElementsByTagName("tbody")[0];

      // -- thêm các dòng vào bảng 
      for (var i = 0; i < vDices.length; i++) {
        var vNewRow = vTableBody.insertRow(gEND_OF_ROW_COL)
        var vGameRow = vNewRow.insertCell(0)
        var vDiceRow = vNewRow.insertCell(1)
        vGameRow.innerHTML = i + 1
        vDiceRow.innerHTML = vDices[i]
      }
    }
  </script>
</body>

</html>